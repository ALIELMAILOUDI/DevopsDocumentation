# Tableaux de Bord de S√©curit√© Grafana

Ce document d√©crit les tableaux de bord Grafana que nous utilisons sp√©cifiquement pour la **surveillance de la s√©curit√©** de notre environnement Cloud-Native. Ces tableaux de bord fournissent une vue d'ensemble en temps r√©el de la posture de s√©curit√©, des alertes actives, des activit√©s suspectes et des tendances.

---

## üöÄ Acc√©der aux Tableaux de Bord

Pour acc√©der √† ces tableaux de bord, connectez-vous √† notre instance Grafana :
`https://grafana.votre-domaine.com` (adaptez l'URL √† votre d√©ploiement).

---

## Tableaux de Bord Cl√©s Orient√©s S√©curit√©

Nous avons plusieurs tableaux de bord pour couvrir diff√©rents aspects de la s√©curit√© :

### 1. **Tableau de Bord "DevSecOps Overview"**

* **Objectif :** Fournir une vue d'ensemble haute-niveau de la sant√© de la s√©curit√© de nos pipelines CI/CD et de notre environnement runtime.
* **Sources de Donn√©es :** Prometheus, Loki.
* **Panels Cl√©s :**
    * **Statut des Scans CI/CD :** Affiche le nombre de jobs SAST, Dependency Scanning, Secret Detection, Container Scanning qui ont r√©ussi/√©chou√©.
    * **Vuln√©rabilit√©s SAST/DAST :** Graphiques des vuln√©rabilit√©s critiques/√©lev√©es par application au fil du temps (si les donn√©es sont export√©es ou scrapp√©es par Prometheus).
    * **Alertes Falco Actives :** Compteur et liste des alertes Falco tri√©es par priorit√© (Critique, √âlev√©e, etc.).
    * **Violations Gatekeeper :** Graphiques des requ√™tes d'admission refus√©es (`denial`) et des violations audit√©es (`audit`) par Gatekeeper.
    * **Activit√© Suspecte des Logs :** Requ√™tes Loki pour des mots-cl√©s de s√©curit√© ou des patterns anormaux dans les logs applicatifs/syst√®me.
    * **Statut de Vault :** M√©triques de sant√© de Vault (si non scell√©, nombre de requ√™tes).

### 2. **Tableau de Bord "Falco - Runtime Security"**

* **Objectif :** Monitoring d√©taill√© des activit√©s de s√©curit√© d√©tect√©es par Falco.
* **Sources de Donn√©es :** Prometheus (pour les m√©triques de Falco), Loki (pour les logs d√©taill√©s des alertes Falco).
* **Panels Cl√©s :**
    * **Volume d'Alertes par Priorit√© :** Histogramme ou graphiques circulaires du nombre d'alertes Falco par niveau de s√©v√©rit√©.
    * **Alertes R√©cents :** Table affichant les derni√®res alertes Falco, avec des d√©tails comme la r√®gle d√©clench√©e, le nom du conteneur, le processus, l'utilisateur et le message de sortie.
    * **Top R√®gles D√©clench√©es :** Liste des r√®gles Falco les plus fr√©quemment d√©clench√©es.
    * **Top Conteneurs/Pods avec Alertes :** Identification des entit√©s les plus "bruyantes" en termes d'alertes de s√©curit√©.
    * **Requ√™tes Loki pour Alertes :** Permet d'explorer les logs bruts des alertes Falco.

### 3. **Tableau de Bord "OPA Gatekeeper - Policy Enforcement"**

* **Objectif :** Suivre l'efficacit√© de nos politiques de contr√¥le d'admission et identifier les tentatives de non-conformit√©.
* **Sources de Donn√©es :** Prometheus (pour les m√©triques de Gatekeeper).
* **Panels Cl√©s :**
    * **Requ√™tes Refus√©es vs. Audit√©es :** Graphique montrant le nombre de requ√™tes d'admission qui ont √©t√© refus√©es ou simplement audit√©es par Gatekeeper.
    * **Violations par ConstraintTemplate :** R√©partition des violations par type de politique (ex: "no-privileged-containers", "resource-limits-required").
    * **Violations par Namespace/Utilisateur :** Identifier les namespaces ou les utilisateurs qui g√©n√®rent le plus de violations.
    * **Top Ressources Viol√©es :** Quelles ressources Kubernetes sp√©cifiques sont le plus souvent √† l'origine de violations.

### 4. **Tableau de Bord "Audit Kubernetes Logs"**

* **Objectif :** Fournir une interface de recherche et d'analyse des logs d'audit de l'API Kubernetes pour des investigations de s√©curit√© approfondies.
* **Sources de Donn√©es :** Loki (n√©cessite que les logs d'audit Kubernetes soient envoy√©s √† Loki via Promtail ou autre).
* **Panels Cl√©s :**
    * **Volume de Logs d'Audit :** Graphique du nombre d'√©v√©nements d'audit par p√©riode.
    * **Op√©rations API par Utilisateur/ServiceAccount :** Identification des utilisateurs et des Service Accounts les plus actifs sur l'API.
    * **Op√©rations API Sensibles :** Filtrage des logs pour les op√©rations de cr√©ation/modification/suppression de secrets, r√¥les, Service Accounts, etc.
    * **Activit√© de Connexion :** Surveillance des tentatives de connexion √† l'API.
    * **Explorateur de Logs :** Un panel pour la recherche interactive dans tous les logs d'audit, permettant de filtrer par utilisateur, ressource, verbe HTTP, etc.

---

## Maintenance des Tableaux de Bord

Ces tableaux de bord sont g√©r√©s en tant qu'IaC (Infrastructure as Code) via [Grafana Provisioning](https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards) ou des outils comme [Grafana Tanka](https://grafana.com/docs/tanka/latest/). Les d√©finitions JSON des tableaux de bord devraient id√©alement √™tre versionn√©es dans un d√©p√¥t Git.

Pour plus d'informations sur la cr√©ation et la gestion de tableaux de bord Grafana, consultez la [documentation officielle de Grafana](https://grafana.com/docs/grafana/latest/).
